Nagle算法：Nagle算法是以他的发明人John Nagle的名字命名的，它用于自动连接许多的小缓冲器消息；这一过程（称为nagling）通过减少必须发送包的个数来增加网络软件系统的效率。
  （如果我想发送两个数据包，一个是4字节，一个是8字节，那么正常发送的话，是两个TCP包，而这两个包都要加上TCP头和IP头，这样带宽利用率就很低，于是乎小包会被组成大包）

  规则：
      （1）如果包长度达到MSS，则允许发送；
      （2）如果该包含有FIN，则允许发送；
      （3）设置了TCP_NODELAY选项，则允许发送；
      （4）未设置TCP_CORK选项时，若所有发出去的小数据包（包长度小于MSS）均被确认，则允许发送；
      （5）上述条件都未满足，但发生了超时（一般为200ms），则立即发送。

  注意：默认情况下，Nagle算法是打开的，可以通过在创建套接字时指定TCP_NODELAY来关闭这个功能。

  小结：1）Nagle是用来解决带宽利用率低的问题，但是会引入实时性差的问题(因为小包会等待其他小包，直到这些包的尺寸和大于MSS，才会被发送出去)。
        2）Nagle是传输控制层的(TCP),其针对的是TCP包，而不是IP包。

  举例：客户端和服务端互相发送的数据都是100ms发送一个‘k’，那么对端收到的应当是“kk”的tcp包，因为200ms时超时了，即使是2个字节的小包也要发送。如果我们设置了TCP_NODELAY，
        那么对端收到的就是‘k’的tcp包，因为即使是一个字节的小包，也要立刻打上tcp包头包尾发送出去。

https://baike.baidu.com/item/Nagle%E7%AE%97%E6%B3%95/5645172
